[{"/Users/observe.ai_36/Desktop/live-code-share/src/index.js":"1","/Users/observe.ai_36/Desktop/live-code-share/src/reportWebVitals.js":"2","/Users/observe.ai_36/Desktop/live-code-share/src/firebase-config.js":"3","/Users/observe.ai_36/Desktop/live-code-share/src/components/App/App.js":"4","/Users/observe.ai_36/Desktop/live-code-share/src/components/Editor/Editor.js":"5","/Users/observe.ai_36/Desktop/live-code-share/src/utils/firebaseRealtime.js":"6","/Users/observe.ai_36/Desktop/live-code-share/src/components/App/Appcontainer.js":"7","/Users/observe.ai_36/Desktop/live-code-share/src/components/Error/index.js":"8","/Users/observe.ai_36/Desktop/live-code-share/src/components/Header/index.js":"9","/Users/observe.ai_36/Desktop/live-code-share/src/components/Users/index.js":"10","/Users/observe.ai_36/Desktop/live-code-share/src/components/Users/UserList/index.js":"11","/Users/observe.ai_36/Desktop/live-code-share/src/components/FileSaver/index.js":"12","/Users/observe.ai_36/Desktop/live-code-share/src/context/userContext.js":"13","/Users/observe.ai_36/Desktop/live-code-share/src/context/htmlContext.js":"14","/Users/observe.ai_36/Desktop/live-code-share/src/components/Autorun/index.js":"15"},{"size":1080,"mtime":1613193885299,"results":"16","hashOfConfig":"17"},{"size":364,"mtime":1610781162469,"results":"18","hashOfConfig":"17"},{"size":413,"mtime":1610781162468,"results":"19","hashOfConfig":"17"},{"size":6265,"mtime":1615734676429,"results":"20","hashOfConfig":"17"},{"size":1467,"mtime":1613193885293,"results":"21","hashOfConfig":"17"},{"size":343,"mtime":1611207548615,"results":"22","hashOfConfig":"17"},{"size":1256,"mtime":1613797703421,"results":"23","hashOfConfig":"17"},{"size":413,"mtime":1613193885293,"results":"24","hashOfConfig":"17"},{"size":958,"mtime":1614325243976,"results":"25","hashOfConfig":"17"},{"size":662,"mtime":1613193885297,"results":"26","hashOfConfig":"17"},{"size":789,"mtime":1613193885295,"results":"27","hashOfConfig":"17"},{"size":2050,"mtime":1613797703422,"results":"28","hashOfConfig":"17"},{"size":157,"mtime":1613193885298,"results":"29","hashOfConfig":"17"},{"size":211,"mtime":1614318584169,"results":"30","hashOfConfig":"17"},{"size":1019,"mtime":1613797703422,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"571jty",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"34"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"34"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"/Users/observe.ai_36/Desktop/live-code-share/src/index.js",[],[],"/Users/observe.ai_36/Desktop/live-code-share/src/reportWebVitals.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/firebase-config.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/App/App.js",["67","68","69","70"],"import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Firebase from 'firebase';\nimport rand from 'random-key';\nimport { ShrinkOutlined, ArrowsAltOutlined } from '@ant-design/icons';\n\n//component\nimport Editor from '../Editor/Editor';\nimport Header from '../Header';\n\n//utils\nimport firebaseRealTime from '../../utils/firebaseRealtime';\n//context\nimport { UserContextProvider } from '../../context/userContext';\nimport { HtmlContextProvider } from '../../context/htmlContext';\n\n//css\nimport './App.scss';\n\nconst App = ({ sessionId, isNewSession }) => {\n  const [html, setHtml] = useState(\n    '<div class=\"text\">Welcome to JS code share</div>'\n  );\n  const [autoRun, setAutoRun] = useState(true);\n  const [css, setCss] = useState('.text{\\n' + '  color: blue\\n' + '}');\n  const [js, setJs] = useState('console.log(\"Welcome to JSCodeShare\")');\n  const [userId, setUserId] = useState(() => {\n    if (sessionStorage.getItem('user')) {\n      return JSON.parse(sessionStorage.getItem('user')).userId;\n    }\n    return;\n  });\n  const [users, setUsers] = useState([]);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const [iframeOpen, setIframeOpen] = useState(true);\n  let fireBaseRef = `live-sessions/${sessionId}`;\n  const fireBaseDatabaseRef = Firebase.database().ref(fireBaseRef);\n  const setValueFromSnapshot = (\n    snapshot = { val: () => ({ html: '', css: '', js: '' }) }\n  ) => {\n    const { html = '', css = '', js = '', users = {} } = snapshot.val() || {};\n    setHtml(html);\n    setCss(css);\n    setJs(js);\n    setUsers(Object.values(users).filter((item) => item.status === 'online'));\n  };\n  useEffect(() => {\n    fireBaseDatabaseRef\n      .once('value')\n      .then((snapshot) => {\n        if (snapshot.exists()) {\n          setValueFromSnapshot(snapshot);\n        }\n      })\n      .catch((e) => {\n        console.log(e);\n      });\n    fireBaseDatabaseRef.on('value', (snapshot) => {\n      if (snapshot.exists()) {\n        setValueFromSnapshot(snapshot);\n      }\n    });\n  }, []);\n  const getNewUserInSession = () => {\n    const userId = rand.generate(3);\n    setUserId(userId);\n    let newUser = { name: `User_${userId}`, status: 'online', userId };\n    sessionStorage.setItem('user', JSON.stringify(newUser));\n    return { userId, newUser };\n  };\n  useEffect(() => {\n    if (isNewSession) {\n      const { userId, newUser } = getNewUserInSession();\n      firebaseRealTime(fireBaseDatabaseRef).set({\n        html,\n        css,\n        js,\n        users: { [userId]: newUser },\n      });\n    }\n    if (!isNewSession && !userId) {\n      const { userId, newUser } = getNewUserInSession();\n      firebaseRealTime(fireBaseDatabaseRef).update({\n        [`users/${userId}`]: newUser,\n      });\n    }\n    if (!isNewSession && userId) {\n      firebaseRealTime(fireBaseDatabaseRef).update({\n        [`users/${userId}/status`]: 'online',\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (autoRun) {\n        if (html || css || js) {\n          refreshIframe();\n        }\n      } else {\n        timeout && clearTimeout(timeout);\n      }\n    }, 300);\n    return () => timeout && clearTimeout(timeout);\n  }, [html, css, js, autoRun]);\n\n  useEffect(() => {\n    document.addEventListener('visibilitychange', () => {\n      if (document.visibilityState === 'visible') {\n        if (userId) {\n          firebaseRealTime(fireBaseDatabaseRef).update({\n            [`users/${userId}/status`]: 'online',\n          });\n        }\n      } else {\n        if (document.visibilityState === 'hidden' && userId) {\n          firebaseRealTime(fireBaseDatabaseRef).update({\n            [`users/${userId}/status`]: 'away',\n          });\n        }\n      }\n    });\n  });\n  const refreshIframe = () => {\n    setIframeSrc(`<html>\n                        <body>${html}</body>\n                         <style>${css}</style>\n                         <script>${js}</script>\n                     </html>`);\n  };\n  const saveToFireBase = (key, value) => {\n    firebaseRealTime(Firebase.database().ref(fireBaseRef)).update({\n      [key]: value,\n    });\n  };\n  const onNameChange = (id, e) => {\n    firebaseRealTime(Firebase.database().ref(fireBaseRef)).update({\n      [`users/${id}/name`]: e.target.value,\n    });\n  };\n  return (\n    <>\n      <UserContextProvider value={userId}>\n        <HtmlContextProvider value={{ iframeSrc, html, css, js }}>\n          <Header\n            users={users}\n            onNameChange={onNameChange}\n            autoRun={autoRun}\n            refreshIframe={refreshIframe}\n            setAutoRun={setAutoRun}\n          />\n        </HtmlContextProvider>\n      </UserContextProvider>\n      <div className={`pane top-pane ${!iframeOpen ? 'expanded' : ''}`}>\n        <Editor\n          language={'xml'}\n          title={'HTML'}\n          value={html}\n          onChange={(value) => {\n            saveToFireBase('html', value);\n            setHtml(value);\n          }}\n        />\n        <Editor\n          language={'css'}\n          title={'CSS'}\n          value={css}\n          onChange={(value) => {\n            saveToFireBase('css', value);\n            setCss(value);\n          }}\n        />\n        <Editor\n          language={'javascript'}\n          title={'JS'}\n          value={js}\n          onChange={(value) => {\n            saveToFireBase('js', value);\n            setJs(value);\n          }}\n        />\n      </div>\n      <div className={`pane ${!iframeOpen ? 'collapased' : ''}`}>\n        <div className={'iframe-container'}>\n          <header className={'iframe-header'}>\n            <div>Output:-</div>\n            <div\n              className={'iframe-action'}\n              onClick={() => setIframeOpen((prev) => !prev)}\n            >\n              {iframeOpen ? <ShrinkOutlined /> : <ArrowsAltOutlined />}\n            </div>\n          </header>\n          <div>\n            <iframe\n              srcDoc={iframeSrc}\n              title={'output'}\n              sandbox={'allow-scripts'}\n              frameBorder={0}\n              width={'100%'}\n              height={'100%'}\n            ></iframe>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nApp.propTypes = {\n  sessionId: PropTypes.string,\n  isNewSession: PropTypes.bool,\n};\nexport default React.memo(App);\n","/Users/observe.ai_36/Desktop/live-code-share/src/components/Editor/Editor.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/utils/firebaseRealtime.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/App/Appcontainer.js",["71","72"],"import React, { useState, useEffect } from 'react';\n\nimport { useParams, useHistory } from 'react-router-dom';\nimport App from './App';\nimport rand from 'random-key';\nimport Firebase from 'firebase';\n\nconst AppContainer = () => {\n  const [sessionId, setsessionId] = useState(useParams().sessionId);\n  const [isNewSession, setIsNewSession] = useState(false);\n  const [sessionChecked, setSessionChecked] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    if (!sessionId) {\n      const randomSessionId = rand.generate(10);\n      history.push({ pathname: `/${randomSessionId}` });\n      setsessionId(randomSessionId);\n      setSessionChecked(true);\n      setIsNewSession(true);\n    } else {\n      Firebase.database()\n        .ref(`live-sessions/${sessionId}`)\n        .once('value', (snapshot) => {\n          console.log(snapshot);\n          if (snapshot.exists()) {\n            setSessionChecked(true);\n            return true;\n          } else {\n            history.push('/error/page');\n            return false;\n          }\n        });\n    }\n  }, []);\n\n  return (\n    <>\n      {sessionId && sessionChecked && (\n        <App sessionId={sessionId} isNewSession={isNewSession} />\n      )}\n    </>\n  );\n};\n\nexport default AppContainer;\n","/Users/observe.ai_36/Desktop/live-code-share/src/components/Error/index.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/Header/index.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/Users/index.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/Users/UserList/index.js",[],[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/FileSaver/index.js",["73","74"],"import React, { useContext } from 'react';\n\nimport { Button, Dropdown, Menu } from 'antd';\nimport { saveAs } from 'file-saver';\nimport JSZip from 'jszip';\n\nimport { DownloadOutlined } from '@ant-design/icons';\nimport HtmlContext from '../../context/htmlContext';\n\nconst HTML = 'html';\nconst ZIP = 'zip';\nconst FILE_TYPE = {\n  [HTML]: 'text/html;charset=utf-8',\n  [ZIP]: 'application/pdf',\n};\nconst MENU_OPTIONS = [\n  {\n    title: 'Html File',\n    key: HTML,\n  },\n  {\n    title: 'Zip File',\n    key: ZIP,\n  },\n];\nconst MenuItems = ({ handleClick }) => (\n  <Menu onClick={handleClick}>\n    {MENU_OPTIONS.map(({ key, title }) => (\n      <Menu.Item key={key}>{title}</Menu.Item>\n    ))}\n  </Menu>\n);\nconst FileSaver = () => {\n  const { iframeSrc, css, js, html } = useContext(HtmlContext);\n  console.log(iframeSrc);\n  const htmlFile = `<!DOCTYPE html><html>\n    <head><link href=\"./css/index.css\" rel=\"stylesheet\"></head>\n    <body>\n        ${html}\n      <script src=\"./js/index.js\"></script>\n     </body>\n</html>`;\n  const handleClick = (e) => {\n    let currentdate = new Date();\n    let datetime = `${currentdate.getDate()}/${\n      currentdate.getMonth() + 1\n    }/${currentdate.getFullYear()}@${currentdate.getHours()}:${currentdate.getMinutes()}:${currentdate.getSeconds()}`;\n    let fileName = `CodeShare_${datetime}.html`;\n    let zip;\n    switch (e.key) {\n      case HTML:\n        saveAs(new Blob([iframeSrc], { type: FILE_TYPE[e.key] }), fileName);\n        break;\n      case ZIP:\n        zip = new JSZip();\n        zip.file('index.html', htmlFile);\n        zip.file('css/index.css', css);\n        zip.file('js/index.js', js);\n        zip.generateAsync({ type: 'blob' }).then(function (content) {\n          saveAs(content, `CodeShare_${datetime}.zip`);\n        });\n    }\n  };\n  return (\n    <Dropdown\n      key={'1'}\n      overlay={<MenuItems handleClick={handleClick} />}\n      placement=\"bottomLeft\"\n      arrow\n    >\n      <Button shape=\"circle\" icon={<DownloadOutlined />} size={'small'} />\n    </Dropdown>\n  );\n};\n\nexport default FileSaver;\n","/Users/observe.ai_36/Desktop/live-code-share/src/context/userContext.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/context/htmlContext.js",[],"/Users/observe.ai_36/Desktop/live-code-share/src/components/Autorun/index.js",[],{"ruleId":"75","severity":1,"message":"76","line":57,"column":9,"nodeType":"77","messageId":"78","endLine":57,"endColumn":20},{"ruleId":"79","severity":1,"message":"80","line":64,"column":6,"nodeType":"81","endLine":64,"endColumn":8,"suggestions":"82"},{"ruleId":"79","severity":1,"message":"83","line":93,"column":6,"nodeType":"81","endLine":93,"endColumn":8,"suggestions":"84"},{"ruleId":"79","severity":1,"message":"85","line":106,"column":6,"nodeType":"81","endLine":106,"endColumn":30,"suggestions":"86"},{"ruleId":"75","severity":1,"message":"76","line":25,"column":11,"nodeType":"77","messageId":"78","endLine":25,"endColumn":22},{"ruleId":"79","severity":1,"message":"87","line":35,"column":6,"nodeType":"81","endLine":35,"endColumn":8,"suggestions":"88"},{"ruleId":"89","severity":1,"message":"90","line":26,"column":22,"nodeType":"91","endLine":26,"endColumn":33},{"ruleId":"75","severity":1,"message":"76","line":35,"column":3,"nodeType":"77","messageId":"78","endLine":35,"endColumn":14},"no-console","Unexpected console statement.","MemberExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fireBaseDatabaseRef'. Either include it or remove the dependency array.","ArrayExpression",["92"],"React Hook useEffect has missing dependencies: 'css', 'fireBaseDatabaseRef', 'html', 'isNewSession', 'js', and 'userId'. Either include them or remove the dependency array.",["93"],"React Hook useEffect has a missing dependency: 'refreshIframe'. Either include it or remove the dependency array.",["94"],"React Hook useEffect has missing dependencies: 'history' and 'sessionId'. Either include them or remove the dependency array.",["95"],"react/prop-types","'handleClick' is missing in props validation","Property",{"desc":"96","fix":"97"},{"desc":"98","fix":"99"},{"desc":"100","fix":"101"},{"desc":"102","fix":"103"},"Update the dependencies array to be: [fireBaseDatabaseRef]",{"range":"104","text":"105"},"Update the dependencies array to be: [css, fireBaseDatabaseRef, html, isNewSession, js, userId]",{"range":"106","text":"107"},"Update the dependencies array to be: [html, css, js, autoRun, refreshIframe]",{"range":"108","text":"109"},"Update the dependencies array to be: [history, sessionId]",{"range":"110","text":"111"},[2029,2031],"[fireBaseDatabaseRef]",[2901,2903],"[css, fireBaseDatabaseRef, html, isNewSession, js, userId]",[3191,3215],"[html, css, js, autoRun, refreshIframe]",[1071,1073],"[history, sessionId]"]